<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mapa sa overlay slikom</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<style>
    body, html {
        margin: 0;
        height: 100%;
        width: 100%;
    }
    #map {
        height: 100vh;
        width: 100%;
    }
    #btn-overlay {
        position: absolute;
        top: 15px;
        left: 200px;
        z-index: 9999;
        padding: 10px 14px;
        background: white;
        border: 1px solid #ccc;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
    }
    #mapName {
<!--         position: absolute;
        top: 15px
		left: 15px
-->		width: 180px;
        margin-top: 20px;

    }
</style>
</head>
<body>
	<div id="controls">
		<input type="text" id="mapName" placeholder="Unesi naziv fajla (npr. mapa.png)">
		<button id="btn-overlay">Učitaj sliku preko mape</button>
	</div>
	<div id="map">
	</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
    // Inicijalizacija mape
    const map = L.map('map').setView([44.813213, 20.413404], 15);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap doprinosioci'
    }).addTo(map);

    let overlay = null;

    document.getElementById("btn-overlay").addEventListener("click", () => {

        const fileName = document.getElementById("mapName").value.trim();

        if (!fileName) {
            alert("Unesite naziv PNG fajla (npr. mapa.png)!");
            return;
        }

        // Unos koordinata ↓
        const lat1 = parseFloat(prompt("Unesi LATITUDE dole-levo:", "44.812000"));
        const lng1 = parseFloat(prompt("Unesi LONGITUDE dole-levo:", "20.412000"));

        const lat2 = parseFloat(prompt("Unesi LATITUDE gore-desno:", "44.814500"));
        const lng2 = parseFloat(prompt("Unesi LONGITUDE gore-desno:", "20.415500"));

        if ([lat1, lng1, lat2, lng2].some(isNaN)) {
            alert("Morate uneti validne brojeve.");
            return;
        }

        // Bounds za image overlay (SW ↔ NE)
        const bounds = L.latLngBounds(
            [lat1, lng1],  // jugozapad (dole-levo)
            [lat2, lng2]   // severoistok (gore-desno)
        );

        // Ako postoji stara slika → ukloni je
        if (overlay) {
            map.removeLayer(overlay);
        }

        // Prikaz PNG-a (ubaci svoj fajl)
        overlay = L.imageOverlay(fileName, bounds, {
            opacity: 0.6,
            interactive: false
        }).addTo(map);

        // Zumira pogled na oblast slike
        map.fitBounds(bounds);
    });
</script>

</body>
</html>
